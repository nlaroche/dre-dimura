/* ============================================
   DRE DIMURA - MODERN VISUAL DESIGN SYSTEM
   Pop Art Imagery + Glassmorphism Controls
   ============================================ */

@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Bebas+Neue&display=swap');

/* ============================================
   CSS VARIABLES - MODERN THEME
   ============================================ */
:root {
  /* Typography */
  --font-display: 'Space Grotesk', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --font-condensed: 'Bebas Neue', sans-serif;

  /* Glass effect */
  --glass-bg: rgba(10, 10, 15, 0.7);
  --glass-border: rgba(255, 255, 255, 0.08);
  --glass-highlight: rgba(255, 255, 255, 0.1);
  --glass-blur: 20px;

  /* Accent colors per module */
  --accent-golden: #f8c060;
  --accent-jade: #50d890;
  --accent-obsidian: #f0f0f0;
  --accent-porta: #f050a0;

  /* Dimensions */
  --rack-width: 1040px;
  --module-height: 360px;
  --fx-height: 120px;
  --nav-height: 66px;

  /* Animation */
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
}

/* ============================================
   RESET & BASE
   ============================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font-display);
  background: #000;
  color: #e0e0e0;
  -webkit-font-smoothing: antialiased;
  user-select: none;
}

/* ============================================
   STUDIO ENVIRONMENT
   ============================================ */
.studio-environment {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #050508;
}

/* ============================================
   EQUIPMENT RACK - MODERN FRAME
   ============================================ */
.equipment-rack {
  width: var(--rack-width);
  height: 650px;
  background: #0a0a0f;
  border-radius: 16px;
  position: relative;
  display: flex;
  flex-direction: column;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05),
    0 50px 100px rgba(0, 0, 0, 0.8);
  overflow: hidden;
}

/* Subtle ambient glow on rack */
.equipment-rack::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 50% at 50% 0%, rgba(255,255,255,0.02) 0%, transparent 50%);
  pointer-events: none;
  z-index: 1000;
}

/* Minimal rack - no rails needed */
.rack-top-panel { display: none; }
.rack-rail { display: none; }

.rack-rails {
  display: flex;
  flex: 1;
  min-height: 0;
}

.rack-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: #050508;
}

/* ============================================
   UNIT SLOT
   ============================================ */
.unit-slot {
  position: relative;
  overflow: hidden;
}

.unit-slot.preamp-slot {
  height: var(--module-height);
  flex: 1;
}

.unit-slot.fx-slot {
  height: var(--fx-height);
  border-top: 1px solid rgba(255,255,255,0.05);
}

.unit-carrier {
  position: absolute;
  inset: 0;
  z-index: 10;
}

/* ============================================
   SLIDE ANIMATIONS
   ============================================ */
.unit-carrier.slide-out-left {
  animation: slideOutLeft 400ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.unit-carrier.slide-out-right {
  animation: slideOutRight 400ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.unit-carrier.slide-in-left {
  animation: slideInLeft 400ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.unit-carrier.slide-in-right {
  animation: slideInRight 400ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes slideOutLeft {
  0% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(-100%); opacity: 0; }
}

@keyframes slideOutRight {
  0% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(100%); opacity: 0; }
}

@keyframes slideInLeft {
  0% { transform: translateX(100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

@keyframes slideInRight {
  0% { transform: translateX(-100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

/* ============================================
   PREAMP MODULE BASE
   ============================================ */
.preamp-unit {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.preamp-unit .mounting-ear { display: none; }
.preamp-unit .preamp-faceplate { display: none; }

/* ============================================
   MODULE ARTWORK
   ============================================ */
.module-artwork {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

.module-artwork {
  animation: artworkBreath 10s ease-in-out infinite;
}

@keyframes artworkBreath {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

/* ============================================
   GLASS PANEL
   ============================================ */
.glass-panel {
  position: relative;
  z-index: 10;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: 12px;
}

.glass-panel::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    var(--glass-highlight) 0%,
    transparent 40%
  );
  pointer-events: none;
}

/* ============================================
   MODULE CONTENT LAYOUT
   ============================================ */
.module-content {
  position: relative;
  z-index: 5;
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 20px;
}

.module-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.module-brand {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.module-logo {
  font-family: var(--font-display);
  font-size: 32px;
  font-weight: 700;
  letter-spacing: 4px;
  text-shadow: 0 4px 20px currentColor;
}

.module-subtitle {
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 400;
  letter-spacing: 2px;
  text-transform: uppercase;
  opacity: 0.5;
}

.module-controls {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.controls-glass {
  display: flex;
  align-items: center;
  gap: 24px;
  padding: 24px 36px;
}

.module-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 12px;
}

.module-footer-text {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 2px;
  opacity: 0.4;
  text-transform: uppercase;
}

/* ============================================
   MODULE THEME COLORS
   ============================================ */
.golden-tape-unit .module-logo { color: var(--accent-golden); }
.golden-tape-unit .module-subtitle { color: var(--accent-golden); }
.golden-tape-unit .glass-panel {
  border-color: rgba(248, 192, 96, 0.2);
  box-shadow: 0 0 40px rgba(248, 192, 96, 0.15);
}

.jade-space-unit .module-logo { color: var(--accent-jade); }
.jade-space-unit .module-subtitle { color: var(--accent-jade); }
.jade-space-unit .glass-panel {
  border-color: rgba(80, 216, 144, 0.2);
  box-shadow: 0 0 40px rgba(80, 216, 144, 0.15);
}

.obsidian-unit .module-logo {
  font-family: var(--font-condensed);
  font-size: 42px;
  letter-spacing: 8px;
  color: var(--accent-obsidian);
  text-shadow: 0 0 30px rgba(255, 255, 255, 0.5), 0 0 60px rgba(180, 160, 255, 0.3);
}
.obsidian-unit .module-subtitle { color: rgba(200, 180, 255, 0.7); }
.obsidian-unit .glass-panel {
  border-color: rgba(180, 160, 255, 0.2);
  box-shadow: 0 0 40px rgba(180, 160, 255, 0.15);
}

.porta80-unit .module-logo { color: var(--accent-porta); }
.porta80-unit .module-subtitle { color: var(--accent-porta); }
.porta80-unit .glass-panel {
  border-color: rgba(240, 80, 160, 0.2);
  box-shadow: 0 0 40px rgba(240, 80, 160, 0.15);
}

/* ============================================
   KNOB STYLES - MODERN
   ============================================ */
.knob-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  user-select: none;
}

.knob-body {
  position: relative;
  cursor: grab;
}

.knob-body:active {
  cursor: grabbing;
}

.knob-outer {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background: linear-gradient(145deg, #1a1a20 0%, #0a0a0f 100%);
  border: 2px solid rgba(255,255,255,0.1);
  box-shadow:
    0 4px 20px rgba(0,0,0,0.6),
    inset 0 2px 0 rgba(255,255,255,0.05);
  transition: all var(--transition-fast);
}

.knob-outer:hover {
  border-color: rgba(255,255,255,0.2);
  box-shadow:
    0 4px 25px rgba(0,0,0,0.7),
    inset 0 2px 0 rgba(255,255,255,0.08);
}

.knob-inner {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(145deg, #252530 0%, #15151a 100%);
  position: relative;
  transition: transform 50ms ease-out;
}

.knob-pointer {
  position: absolute;
  top: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 3px;
  height: 12px;
  border-radius: 2px;
  background: currentColor;
  box-shadow: 0 0 12px currentColor;
}

.knob-label {
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 500;
  letter-spacing: 1px;
  text-transform: uppercase;
  opacity: 0.7;
}

/* Knob accent colors */
.knob-container.golden .knob-pointer { color: var(--accent-golden); }
.knob-container.jade .knob-pointer { color: var(--accent-jade); }
.knob-container.obsidian .knob-pointer { color: var(--accent-obsidian); }
.knob-container.porta .knob-pointer { color: var(--accent-porta); }

.knob-container.golden .knob-label { color: var(--accent-golden); }
.knob-container.jade .knob-label { color: var(--accent-jade); }
.knob-container.obsidian .knob-label { color: var(--accent-obsidian); }
.knob-container.porta .knob-label { color: var(--accent-porta); }

/* Small knobs */
.knob-container.small .knob-outer {
  width: 44px;
  height: 44px;
}

.knob-container.small .knob-inner {
  width: 32px;
  height: 32px;
}

.knob-container.small .knob-pointer {
  height: 10px;
  top: 5px;
}

.knob-container.small .knob-label {
  font-size: 9px;
}

/* ============================================
   VU METER - MODERN
   ============================================ */
.vu-meter-modern {
  width: 120px;
  height: 50px;
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  position: relative;
  overflow: hidden;
}

.vu-meter-modern .vu-scale {
  position: absolute;
  top: 8px;
  left: 12px;
  right: 12px;
  display: flex;
  justify-content: space-between;
  font-family: var(--font-mono);
  font-size: 8px;
  opacity: 0.5;
}

.vu-meter-modern .vu-bar {
  position: absolute;
  bottom: 10px;
  left: 12px;
  right: 12px;
  height: 16px;
  background: rgba(255,255,255,0.05);
  border-radius: 4px;
  overflow: hidden;
}

.vu-meter-modern .vu-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 80ms ease-out;
}

/* ============================================
   LED METER - MODERN
   ============================================ */
.led-meter-modern {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.led-meter-modern .led-stack {
  display: flex;
  flex-direction: column-reverse;
  gap: 2px;
}

.led-meter-modern .led-segment {
  width: 24px;
  height: 4px;
  background: rgba(255,255,255,0.08);
  border-radius: 2px;
  transition: all 80ms ease;
}

.led-meter-modern .led-segment.on.green {
  background: #40ff60;
  box-shadow: 0 0 10px #40ff60;
}

.led-meter-modern .led-segment.on.yellow {
  background: #ffee40;
  box-shadow: 0 0 10px #ffee40;
}

.led-meter-modern .led-segment.on.red {
  background: #ff4040;
  box-shadow: 0 0 10px #ff4040;
}

.led-meter-modern .led-label {
  font-family: var(--font-mono);
  font-size: 9px;
  opacity: 0.5;
  text-transform: uppercase;
}

/* ============================================
   FADER - MODERN
   ============================================ */
.fader-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.fader-track {
  width: 20px;
  height: 80px;
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px;
  position: relative;
  cursor: pointer;
}

.fader-groove {
  position: absolute;
  left: 50%;
  top: 8px;
  bottom: 8px;
  width: 2px;
  transform: translateX(-50%);
  background: rgba(255,255,255,0.1);
  border-radius: 1px;
}

.fader-thumb {
  position: absolute;
  left: -4px;
  right: -4px;
  height: 20px;
  background: linear-gradient(180deg, #4a4a55 0%, #2a2a35 100%);
  border-radius: 4px;
  border: 1px solid rgba(255,255,255,0.15);
  cursor: grab;
  transition: bottom 50ms ease-out;
  box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

.fader-thumb:active {
  cursor: grabbing;
}

.fader-label {
  font-family: var(--font-mono);
  font-size: 9px;
  opacity: 0.5;
  text-transform: uppercase;
}

/* ============================================
   TOGGLE SWITCH - MODERN
   ============================================ */
.toggle-switch {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.toggle-label {
  font-family: var(--font-mono);
  font-size: 10px;
  opacity: 0.6;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.toggle-track {
  width: 44px;
  height: 24px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  position: relative;
  transition: all var(--transition-normal);
}

.toggle-thumb {
  position: absolute;
  top: 3px;
  left: 3px;
  width: 16px;
  height: 16px;
  background: #4a4a55;
  border-radius: 50%;
  transition: all var(--transition-normal);
}

.toggle-track.active {
  background: rgba(80, 216, 144, 0.2);
  border-color: var(--accent-jade);
}

.toggle-track.active .toggle-thumb {
  left: 23px;
  background: var(--accent-jade);
  box-shadow: 0 0 15px var(--accent-jade);
}

/* ============================================
   PILOT LIGHT - MODERN
   ============================================ */
.pilot-light {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(255,255,255,0.1);
  transition: all var(--transition-normal);
}

.pilot-light.on {
  box-shadow: 0 0 20px currentColor;
}

.pilot-light.amber.on {
  background: var(--accent-golden);
}

.pilot-light.green.on {
  background: var(--accent-jade);
}

.pilot-light.red.on {
  background: #ff4040;
}

/* ============================================
   FX MODULE - MODERN
   ============================================ */
.fx-module {
  position: absolute;
  inset: 8px;
  display: flex;
  align-items: center;
  padding: 0 24px;
  gap: 24px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
  border-radius: 12px;
}

.fx-ear { display: none; }

.fx-label {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 3px;
  opacity: 0.6;
}

.fx-controls {
  display: flex;
  align-items: center;
  gap: 20px;
  flex: 1;
}

.fx-indicator {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(255,255,255,0.1);
  transition: all var(--transition-normal);
}

.fx-indicator.active {
  background: var(--accent-jade);
  box-shadow: 0 0 15px var(--accent-jade);
}

/* ============================================
   NAVIGATION - MODERN
   ============================================ */
.rack-navigation {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
  padding: 16px;
  height: var(--nav-height);
  background: rgba(10, 10, 15, 0.9);
  border-top: 1px solid rgba(255,255,255,0.05);
}

.nav-btn {
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.nav-btn:hover:not(:disabled) {
  background: rgba(255,255,255,0.1);
  border-color: rgba(255,255,255,0.2);
}

.nav-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.nav-btn svg {
  width: 16px;
  height: 16px;
  stroke: #888;
  stroke-width: 2;
  fill: none;
}

.nav-btn:hover:not(:disabled) svg {
  stroke: #fff;
}

.module-indicators {
  display: flex;
  gap: 12px;
}

.indicator-dot {
  width: 10px;
  height: 10px;
  background: rgba(255,255,255,0.1);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  transition: all var(--transition-normal);
}

.indicator-dot:hover {
  background: rgba(255,255,255,0.2);
}

.indicator-dot.active {
  background: var(--accent-golden);
  box-shadow: 0 0 12px var(--accent-golden);
}

.module-badge {
  font-family: var(--font-display);
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 3px;
  color: #888;
  padding: 10px 28px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 6px;
  min-width: 180px;
  text-align: center;
}

/* ============================================
   BYPASSED STATE
   ============================================ */
.preamp-unit.bypassed {
  filter: brightness(0.5) saturate(0.3);
}

.preamp-unit.bypassed .module-artwork {
  animation-play-state: paused;
}
